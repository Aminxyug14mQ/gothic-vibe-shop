{% extends "base.html" %}

{% block content %}
<!-- قسم البطل مع دعم الصور من لوحة التحكم -->
<section class="hero-section">
    {% for image in home_images if image.position == 'hero' and image.is_active %}
    <div class="hero-background" style="background-image: url('{{ url_for('static', filename='uploads/' + image.image) }}');">
        <div class="container">
            <div class="hero-content">
                {% if image.title %}<h1 class="hero-title">{{ image.title }}</h1>{% endif %}
                {% if image.description %}<p class="hero-subtitle">{{ image.description }}</p>{% endif %}
                <a href="{{ url_for('shop') }}" class="btn btn-gothic">استكشف المجموعة</a>
            </div>
        </div>
    </div>
    {% else %}
    <!-- الصورة الافتراضية إذا لم توجد صور -->
    <div class="hero-background"
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Gothic Vibe Shop</h1>
                <p class="hero-subtitle">اكتشف مجموعة الملابس القوطية الفريدة والمتميزة التي تناسب ذوقك المميز</p>
                <a href="{{ url_for('shop') }}" class="btn btn-gothic">استكشف المجموعة</a>
            </div>
        </div>
    </div>
    {% endfor %}
</section>

<!-- بانر وسطي مع دعم الصور من لوحة التحكم -->
{% for image in home_images if image.position == 'banner' and image.is_active %}
<section class="banner-section py-4">
    <div class="container">
        <div class="banner-content text-center">
            {% if image.title %}<h3 class="banner-title">{{ image.title }}</h3>{% endif %}
            {% if image.description %}<p class="banner-text">{{ image.description }}</p>{% endif %}
            <img src="{{ url_for('static', filename='uploads/' + image.image) }}" alt="{{ image.title }}" class="banner-img img-fluid">
        </div>
    </div>
</section>
{% endfor %}

<!-- أحدث المنتجات -->
<section class="products-section py-5">
    <div class="container">
        <h2 class="section-title">أحدث التصاميم</h2>
        <div class="row">
            {% for product in products %}
            <div class="col-md-3 mb-4">
                <div class="product-card">
                    <div class="product-img-container">
                        <img src="{{ url_for('static', filename='uploads/' + product.image) }}" alt="{{ product.name }}" class="product-img">
                        <div class="product-overlay">
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-gothic">عرض التفاصيل</a>
                        </div>
                    </div>
                    <div class="product-info">
                        <h5 class="product-title">{{ product.name }}</h5>
                        <div class="product-price">
                            <span class="current-price">{{ product.price }} درهم</span>
                            {% if product.old_price %}
                            <span class="old-price">{{ product.old_price }} درهم</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{{ url_for('shop') }}" class="btn btn-gothic">عرض جميع المنتجات</a>
        </div>
    </div>
</section>

<!-- قسم من نحن مع دعم الصور من لوحة التحكم -->
<section class="about-section py-5 bg-dark">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2 class="section-title">من نحن</h2>
                <p>Gothic Vibe Shop هو متجر متخصص في تقديم أجود الملابس ذات الطابع القوطي الفريد. نقدم تصاميم حصرية تجمع بين الأصالة والحداثة في عالم الموضة القوطية.</p>
                <p>جميع منتجاتنا مصنوعة من مواد عالية الجودة وتصاميم مبتكرة تناسب الذوق المتميز لمحبي الثقافة القوطية.</p>
            </div>
            <div class="col-md-6">
                {% for image in home_images if image.position == 'about' and image.is_active %}
                <img src="{{ url_for('static', filename='uploads/' + image.image) }}" alt="من نحن" class="about-img img-fluid rounded">
                {% else %}
                 alt="من نحن" class="about-img img-fluid rounded">
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- قسم إضافي للصور -->
{% for image in home_images if image.position == 'section' and image.is_active %}
<section class="custom-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <img src="{{ url_for('static', filename='uploads/' + image.image) }}" alt="{{ image.title }}" class="img-fluid rounded">
            </div>
            <div class="col-md-6">
                {% if image.title %}<h2 class="section-title">{{ image.title }}</h2>{% endif %}
                {% if image.description %}<p>{{ image.description }}</p>{% endif %}
            </div>
        </div>
    </div>
</section>
{% endfor %}

<style>
.hero-section {
    position: relative;
    min-height: 80vh;
    overflow: hidden;
}

.hero-background {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    min-height: 80vh;
    display: flex;
    align-items: center;
    position: relative;
}

.hero-background::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(0,0,0,0.7), rgba(128,0,0,0.5));
}

.hero-content {
    position: relative;
    z-index: 2;
    color: white;
    text-align: center;
}

.banner-section {
    background: var(--gothic-gray);
    border-top: 2px solid var(--gothic-red);
    border-bottom: 2px solid var(--gothic-red);
}

.banner-content {
    color: var(--gothic-light);
}

.banner-img {
    max-height: 300px;
    object-fit: cover;
    border-radius: 10px;
    margin-top: 20px;
}

.about-img {
    max-height: 400px;
    object-fit: cover;
}

.custom-section {
    background: var(--gothic-dark);
    border-left: 4px solid var(--gothic-red);
}

@media (max-width: 768px) {
    .hero-background {
        min-height: 60vh;
    }
    
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
}
</style>
{% endblock %}
